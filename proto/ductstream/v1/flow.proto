syntax = "proto3";

package ductstream.v1;

import "ductstream/v1/types.proto";

option go_package = "github.com/josephjohncox/ductstream/gen/go/ductstream/v1;ductstreampb";

service FlowService {
  rpc CreateFlow(CreateFlowRequest) returns (Flow);
  rpc StartFlow(StartFlowRequest) returns (Flow);
  rpc StopFlow(StopFlowRequest) returns (Flow);
  rpc ResumeFlow(ResumeFlowRequest) returns (Flow);
  rpc GetFlow(GetFlowRequest) returns (Flow);
  rpc ListFlows(ListFlowsRequest) returns (ListFlowsResponse);
  rpc DeleteFlow(DeleteFlowRequest) returns (DeleteFlowResponse);
}

message CreateFlowRequest {
  Flow flow = 1;
  bool start_immediately = 2;
}

message StartFlowRequest {
  string flow_id = 1;
}

message StopFlowRequest {
  string flow_id = 1;
}

message ResumeFlowRequest {
  string flow_id = 1;
}

message GetFlowRequest {
  string flow_id = 1;
}

message ListFlowsRequest {
  int32 page_size = 1;
  string page_token = 2;
}

message ListFlowsResponse {
  repeated Flow flows = 1;
  string next_page_token = 2;
}

message DeleteFlowRequest {
  string flow_id = 1;
}

message DeleteFlowResponse {
  bool deleted = 1;
}
