# Production-flavored values template for DuctStream.
# - Uses ConfigMap for non-secret env vars
# - Uses Secret for sensitive values

image:
  repository: ghcr.io/josephjohncox/ductstream
  tag: "0.1.0"
  pullPolicy: IfNotPresent

replicaCount: 2

service:
  type: ClusterIP
  port: 8080

serviceAnnotations: {}

# ConfigMap-backed env vars
config:
  enabled: true
  data:
    DUCTSTREAM_GRPC_LISTEN: ":8080"
    DUCTSTREAM_WIRE_FORMAT: "arrow"

# Secret-backed env vars (reference in envFrom)
# Create a Secret named <release>-ductstream-secrets with keys like DUCTSTREAM_POSTGRES_DSN
# Example:
# kubectl create secret generic my-ductstream-secrets \
#   --from-literal=DUCTSTREAM_POSTGRES_DSN='postgres://...'
# Then set envFrom below.

envFrom:
  - secretRef:
      name: "ductstream-secrets"

# Additional env overrides
# env:
#   - name: DUCTSTREAM_DBOS_ENABLED
#     value: "true"

resources:
  requests:
    cpu: 200m
    memory: 256Mi
  limits:
    cpu: 1000m
    memory: 1Gi
