{
  "name": "pg_to_kafka_http_primary",
  "wire_format": "json",
  "config": {
    "ack_policy": "primary",
    "primary_destination": "kafka-out",
    "failure_mode": "hold_slot",
    "give_up_policy": "on_retry_exhaustion"
  },
  "source": {
    "name": "pg-source",
    "type": "postgres",
    "options": {
      "dsn": "postgres://user:pass@localhost:5432/app?sslmode=disable",
      "slot": "wallaby_slot",
      "publication": "wallaby_pub",
      "batch_size": "500",
      "batch_timeout": "1s",
      "status_interval": "10s",
      "create_slot": "true",
      "format": "json"
    }
  },
  "destinations": [
    {
      "name": "kafka-out",
      "type": "kafka",
      "options": {
        "brokers": "localhost:9092",
        "topic": "wallaby.cdc",
        "format": "json",
        "compression": "lz4",
        "acks": "all"
      }
    },
    {
      "name": "http-out",
      "type": "http",
      "options": {
        "url": "https://api.example.com/ingest",
        "method": "POST",
        "format": "json",
        "headers": "Authorization:Bearer token123"
      }
    }
  ]
}
